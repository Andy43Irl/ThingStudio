<template name="WidgetsHeader">
	<h1 class="left">Widgets</h1>
	<!-- <a href="#" class="btn right header-action-2"><span class="ha2-status status-active"></span>Animate Widgets</a> -->
	<a class="header-action-1 clearfix" href="#">Create a new widget</a>
</template>

<template name="WidgetList">
	<div class="col s12 m4">
		<div class="card small">
			<div class="card-content">
				<span class="card-title activator">{{title}} <i class="mdi-navigation-more-vert right"></i></span>
				{{{widgetTag}}} {{{widgetEndTag}}}
			</div>
			<div class="card-reveal">
				<span class="card-title">{{widgetName}}<i class="mdi-navigation-close right"></i></span>
				<!-- <p>{{widgetInstructions}}</p> -->
				<p>Example invocation:</p>
					&lt;{{widgetName}}  
					{{#each widgetParameters}}
					{{title}}=&quot;&quot; 
					{{/each}}
					&gt;
					&lt;/{{widgetName}}&gt;
				<table >
					{{#each widgetParameters}}
						<tr>
							<td>{{title}}</td><td>{{mandatory}}</td><td>{{description}}</td>
						</tr>
					{{/each}}
				</table>
				
			</div>
			<div class="card-action">
				<div class="right">
					{{#if iAmOwner}}
						<a class="table-action table-edit-item" href="{{pathFor 'EditScreen'}}"><i class="mdi-editor-mode-edit"></i></a>
						<a class="table-action table-edit-item" href="{{pathFor 'SafeEditScreen'}}"><i class="mdi-action-visibility-off"></i></a>
						{{#afModal classes="table-action table-cancel-item" collection="Screens" operation="remove" doc=_id title="Deleting Feed" buttonContent="Delete" buttonCancelContent="Cancel"}}<i class="mdi-navigation-close"></i>{{/afModal}}
					{{else}}
						<a class="table-action table-edit-item" href="{{pathFor 'EditScreen'}}"><i class="mdi-action-visibility"></i></a>
					{{/if}}
				</div>
			</div>
		</div>
	</div>
</template>

<template name="WidgetsBody">
	{{> autoformModals}}
	{{#contentFor region="appHeader" template="WidgetsHeader"}}{{/contentFor}}
	{{> WidgetsNewItem}}
	<div class="top-row">
		<div class="col s4 tabs-container">
			<ul class="tabs">
				<li class="tab"><a href="#global-widgets">System Widgets</a></li>
				<li class="tab"><a href="#my-widgets">My Widgets</a></li>				
			</ul>
		</div>
		<div class="clearfix"></div>
	</div>
	<div class="single-page-container widgets">
		<div id="global-widgets">
		{{#each systemWidgetList}}
			{{> WidgetList this}}
		{{/each}}
		</div>
		<div id="my-widgets">
			{{#each myWidgetList}}
				{{> WidgetList this}}
			{{/each}}
		</div>
	</div>
</template>

<template name="WidgetsNewItem">
	<div class="add-new-item">
		{{#autoForm collection="Screens" id="insertItemForm" type="insert"}}
			<table>
			{{> WidgetsTableWidths}}
				<tbody>
					<tr>
						<td>{{> afQuickField name='title' placeholder="Widget Title" class="first"}} {{> afQuickField name="isWidget"}}</td>
						<td>
							<button type="submit" class="table-action table-save-new"><i class="mdi-navigation-check"></i></button><button class="table-action table-cancel-new"><i class="mdi-navigation-close"></i></button>
						</td>
					</tr>
				</tbody>
			</table>
			{{> NewItemDivider}}
		{{/autoForm}}
	</div>
</template>

<template name="WidgetsTableWidths">
	<colgroup>
		<col style="width: 91%;">
		<col style="width: 109px;">
	</colgroup>
</template>