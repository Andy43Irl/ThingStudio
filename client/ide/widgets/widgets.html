<template name="WidgetsHeader">
	<h1 class="left">Widgets</h1>
	<!-- <a href="#" class="btn right header-action-2"><span class="ha2-status status-active"></span>Animate Widgets</a> -->
	<a class="header-action-1 clearfix" href="#">Create a new widget</a>
</template>

<template name="WidgetList">
	<div class="col s12 m4">
		<div class="card small">
			<div class="card-content">
				<span class="card-title activator">{{title}} <i class="mdi-navigation-more-vert right"></i></span>
					<div class="svg-container">
						{{{widgetTag}}} {{{widgetEndTag}}}
					</div>
			</div>
			<div class="card-reveal">
				<span class="card-title">{{title}}<i class="mdi-navigation-close right"></i></span>
				<!-- <p>{{widgetInstructions}}</p> -->
				<p class="fwHeavy usage">Usage:</p>
				<span class="usage-inner">
					<span class="element">&lt;{{tagName}}</span><span class="parameter">{{#each parameters}} {{title}}=<span class="white-text">&quot;{{dummyValue}}&quot;</span>{{/each}}</span><span class="element">&gt;&lt;/{{tagName}}&gt;</span>
				</span>
				{{#if parameters}}
					<table class="widget-item bordered striped">
						<thead>
							<tr>
								<td>Parameter</td><td>Required</td><td>Description</td>
							</tr>
						</thead>
						<tbody>
							{{#each parameters}}
								<tr>
									<td>{{title}}</td><td>{{mandatory}}</td><td>{{description}}</td>
								</tr>
							{{/each}}
						</tbody>
					</table>
				{{/if}}
			</div>
			<div class="card-action">
				<div class="right">
					{{#if isSystemWidget}}
						<a class="table-action table-edit-item" href="{{pathFor 'SingleWidget'}}"><i class="mdi-action-visibility"></i></a>
					{{else}}
						<a class="table-action table-edit-item" href="/templates/{{baseScreen}}/edit"><i class="mdi-editor-mode-edit"></i></a>
						{{#afModal classes="table-action table-cancel-item" collection="Screens" operation="remove" doc=_id title="Deleting Feed" buttonContent="Delete" buttonCancelContent="Cancel"}}<i class="mdi-navigation-close"></i>{{/afModal}}
					{{/if}}
				</div>
			</div>
		</div>
	</div>
</template>

<template name="WidgetsBody">
	{{> autoformModals}}
	{{#contentFor region="appHeader" template="WidgetsHeader"}}{{/contentFor}}
	{{> WidgetsNewItem}}
	<div class="top-row">
		<div class="col s4 tabs-container">
			<ul class="tabs">
				<li class="tab"><a href="#global-widgets">System Widgets</a></li>
				<li class="tab"><a href="#my-widgets">My Widgets</a></li>				
			</ul>
		</div>
		<div class="clearfix"></div>
	</div>
	<div class="single-page-container widgets">
		<div id="global-widgets">
		{{#each systemWidgetList}}
			{{> WidgetList }}
		{{/each}}
		</div>
		<div id="my-widgets">
			{{#each myWidgetList}}
				{{> WidgetList }}
			{{/each}}
		</div>
	</div>
</template>

<template name="WidgetsNewItem">
	<div class="add-new-item">
		{{#autoForm collection="Widgets" id="insertItemForm" type="insert"}}
			<table>
			{{> WidgetsTableWidths}}
				<tbody>
					<tr>
						<td>{{> afQuickField name='title' placeholder="Widget Title"}} </td>
						<td>{{> afQuickField name='tagName' placeholder="Element Name" }} </td>
						<td>{{> afQuickField name='baseScreen' placeholder="Base Template" }} </td>
						<td>
							<button type="submit" class="table-action table-save-new"><i class="mdi-navigation-check"></i></button><button class="table-action table-cancel-new"><i class="mdi-navigation-close"></i></button>
						</td>
					</tr>
				</tbody>
			</table>
			{{> NewItemDivider}}
		{{/autoForm}}
	</div>
</template>

<template name="WidgetsTableWidths">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 25%;">
		<col style="width: 16%;">
		<col style="width: 109px;">
	</colgroup>
</template>